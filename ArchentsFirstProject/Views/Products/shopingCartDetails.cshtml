@model IEnumerable<ArchentsFirstProject.Models.ShopingCartModel>
@{
    ViewBag.Title = "shopingCartDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
    decimal totalamount = 0;
}
 
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            const close = document.querySelectorAll("#tab");
            const closebtn = document.getElementById("#closebtn");
            for (let i = 0; i < close.length; i++) {
                close[i].addEventListener('click', "#closebtn", () => {
                    
                    close[i].parentElement.style.display = "none";
                })
            }
        })
    </script>
 
</head>
<body>
    <div class="container">
        <h2>shopingCartDetails</h2>
        @using (Html.BeginForm("", "", FormMethod.Post))
        {
            <table class="table" id="tab">
                @foreach (var item in Model)
                {
                    totalamount += Convert.ToInt32( item.TotalPrice);
                    <tr id="trrr">
                        <td>
                            <img src="~/Content/WeekendBootimages/@item.Imagepath" height="70px" width="70px" class="img-rounded" />
                        </td>
                        <td style="text-align:center;">
                            @item.ItemName
                        </td>

                        <td>
                            @item.Quantity
                        </td>
                        <td>
                            @item.UnitPrice
                        </td>
                        <td>
                            @item.TotalPrice
                        </td>
                        <td>
                            <div class="icon">
                                @*<a href="#" id="closebtn" onclick="closebtn()"> <i class="bi bi-trash3-fill"></i></a>*@
                                <a href="/Products/RemoveCartItem?id=@item.CartId" ><i class="bi bi-trash3-fill"></i></a>
                            </div>
                        </td>
                    </tr>
                }
                <tr style="border-top:2px solid maroon">
                    <td colspan="4" style="text-align:right">
                        <h3>
                            Total Amount
                        </h3>
                    </td>
                    <td style="text-align:right">
                        @totalamount
                    </td>
                </tr>
                <tr style="text-align:right">
                    <td colspan="5">
                        <input type="submit" value="Checkout" class="btn btn-success" />
                    </td>
                </tr>
            </table>
        }
    </div>
    <script>
        function Remove(item) {
            var itemId = $(item).attr("itemid")
            var formdata = new FormData();
            formdata.delete("id", "itemId");
            var a = { "id": itemId };

            $.ajax({
                dataType: 'JSON',
                type: "Post",
                data: a,
                url: "/Products/RemoveCartItem",
                success: function (data) {
                    Session["Carditgem"].Remove(); //session list remove ?
                },
                error: function () {
                    alert("there is something is Wrong....")
                }
            });
        }</script>


</body>
</html>





